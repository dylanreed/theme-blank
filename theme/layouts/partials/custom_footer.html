<!-- Cassette futurism theme styles -->
<style>
  :root {
    --neon-blue: #00FFFF;
    --neon-pink: #FF00FF;
    --neon-purple: #9900FF;
    --neon-green: #39FF14;
    --sunset-orange: #FF8C69;
    --teal: #00CED1;
    --chrome: #C0C0C0;
    --black: #000000;
  }
  
  body {
    background-color: var(--black);
    background-image: url('https://github.com/dylanreed/theme-blank/blob/master/theme/public/background.png?raw=true');
    background-size: cover;
    background-attachment: fixed;
    background-position: center;
    background-repeat: no-repeat;
    background-blend-mode: overlay;
    color: var(--chrome);
  }
  
  a {
    color: var(--neon-blue);
    transition: color 0.3s ease;
  }
  
  a:hover {
    color: var(--neon-pink);
    text-shadow: 0 0 5px var(--neon-pink);
  }
  
  .site-header {
    border-bottom: 2px solid var(--neon-purple);
  }
  
  .site-footer {
    border-top: 2px solid var(--neon-purple);
  }
  
  .site-title {
    color: var(--neon-green);
    text-shadow: 0 0 10px var(--neon-green);
  }
  
  .page-link {
    color: var(--teal);
  }
  
  .page-link.active {
    color: var(--sunset-orange);
    text-shadow: 0 0 5px var(--sunset-orange);
  }
  
  /* Loading indicator */
  .loading-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.7);
    z-index: 9999;
    justify-content: center;
    align-items: center;
  }
  
  .loading-spinner {
    width: 60px;
    height: 60px;
    border: 5px solid transparent;
    border-top: 5px solid var(--neon-pink);
    border-right: 5px solid var(--neon-blue);
    border-bottom: 5px solid var(--neon-green);
    border-left: 5px solid var(--sunset-orange);
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
  
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>

<!-- Loading overlay -->
<div class="loading-overlay" id="loadingOverlay">
  <div class="loading-spinner"></div>
</div>

<!-- Client-side navigation script -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Show loading overlay only on initial page load
  const loadingOverlay = document.getElementById('loadingOverlay');
  
  // Handle initial page load
  if (sessionStorage.getItem('initialPageLoaded') !== 'true') {
    loadingOverlay.style.display = 'flex';
    setTimeout(function() {
      loadingOverlay.style.display = 'none';
      sessionStorage.setItem('initialPageLoaded', 'true');
    }, 1000);
  }
  
  // Set up client-side navigation
  const navLinks = document.querySelectorAll('.site-nav a');
  
  navLinks.forEach(link => {
    link.addEventListener('click', function(e) {
      e.preventDefault();
      const href = this.getAttribute('href');
      
      // Update active state
      document.querySelectorAll('.page-link').forEach(el => {
        el.classList.remove('active');
      });
      this.classList.add('active');
      
      fetch(href)
        .then(response => response.text())
        .then(html => {
          const parser = new DOMParser();
          const doc = parser.parseFromString(html, 'text/html');
          
          // Update only the main content
          const contentArea = document.querySelector('main');
          if (contentArea && doc.querySelector('main')) {
            contentArea.innerHTML = doc.querySelector('main').innerHTML;
            history.pushState(null, doc.title, href);
            document.title = doc.title;
          } else {
            // Fallback to full page load if main element not found
            window.location.href = href;
          }
        })
        .catch(error => {
          console.error('Navigation error:', error);
          window.location.href = href; // Fallback to normal navigation
        });
    });
  });
  
  // Handle back/forward browser navigation
  window.addEventListener('popstate', function() {
    fetch(window.location.href)
      .then(response => response.text())
      .then(html => {
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');
        
        const contentArea = document.querySelector('main');
        if (contentArea && doc.querySelector('main')) {
          contentArea.innerHTML = doc.querySelector('main').innerHTML;
          document.title = doc.title;
        }
      });
  });
});
</script>

<!-- Include any plugin scripts from the site params -->
{{ range .Site.Params.plugins_js }}
  <script src="{{ . }}"></script>
{{ end }}